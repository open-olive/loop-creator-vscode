/* eslint-disable @typescript-eslint/no-empty-function */
import { whisper } from '@oliveai/ldk';
import { write } from '@oliveai/ldk/dist/clipboard';
import { OCRResult } from '@oliveai/ldk/dist/screen';
import { runtime } from 'webpack';
import screenExample, { writeWhisper, performOcr, rebuildImage } from './screenExample';

jest.mock('@oliveai/ldk');

const writeWhisperSpy = jest.fn().mockImplementation(() => {});

jest.mock('./screenExample', () => ({
  ...jest.requireActual('./screenExample'),
  writeWhisper: () => {
    writeWhisperSpy();
  },
}));

describe('Screen Aptitude', () => {
  afterEach(() => {
    jest.clearAllMocks();
  });

  it('should call write whisper when the function is called', () => {
    writeWhisper('test', 'test');

    expect(writeWhisperSpy).toBeCalled();
  });

  it('should return correct value', () => {
    const test: OCRResult = {
      level: 1,
      page_num: 1,
      block_num: 1,
      par_num: 1,
      line_num: 1,
      word_num: 1,
      left: 1,
      top: 1,
      width: 1,
      height: 1,
      confidence: 99,
      text: 'test',
    };

    const result = rebuildImage([test]);

    expect(result).toContain('\n test');
  });
});
